<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title>test 3d</title>
    <script src="HakeCSS3D.min.js"></script>
    <style>
        #test{
            color: greenyellow;
            position: absolute;
            top: 0;
            left: 0;
            float: left;
            z-index: 999;
        }

        #main div{
            border: dashed 1px white;
        }
    </style>
</head>
<body>
<div id="test"></div>
<div id="main"></div>

<script>
  window.onload = (function () {
    window.C3 = new HakeCSS3D();
    window.s = new C3.Stage();
    s.size(window.innerWidth, window.innerHeight).material({
      color : "#cccccc"
    }).update();
    document.getElementById('main').appendChild(s.el);
    window.sp = new C3.Sprite();
    sp.position(0, 0, -500).update();
    s.addChild(sp);
    window.p = new C3.Triangle();
    p.size(50,70).position(0, 30, -s.fov).rotation(0, 0, 0).material({
      color : C3.color.getRandomColor()
    }).update();
    //sp.addChild(p);
    window.c = new C3.Box();
    c.size(200).position(0, 0, -s.fov).rotation(0, 0, 0).material({
      color : C3.color.getRandomColor()
    }).visibility({alpha : 0.4}).update();
    sp.addChild(c);
    var c1 = (new C3.Box()).size(100).position(0, 0, -s.fov).rotation(0, 0, 0).material({
      color : C3.color.getRandomColor()
    }).visibility({alpha : 0.4}).update();
    sp.addChild(c1);
    setInterval(function () {
      c.rotate(0.5,0.5,0);
      c1.rotate(0.5,0.5,0);
      c.update();
      c1.update();
      },10);

    var o = new C3.Orienter();

    o.onOrient = function (e) {
      console.log(330-e.lon)

      if(!window.Ooffset)
        window.Ooffset = e.lon;

      var a = e.lon - window.Ooffset,b = e.lat;

      if(a>60)
        a = 60;
      if(a<-60)
        a = -60;

      if(b > 60)
        b = 60;
      if(b < -60)
        b = -60;

      console.log(e.lat);
      document.getElementById('test').innerText = a;

      sp.rotation(b, -a, 0).updateT()
    };

    o.init();

    /*document.onmousemove = function (e) {
       var rotate = e.screenX/window.innerWidth - 0.5 ;
       sp.rotation(0,rotate*120,0).updateT()
    };*/

     /* window.addEventListener('deviceorientation',function (e) {
          console.log(e)

          var a = e.alpha,b,g;
          if(a>60)
              a = 60;
          if(a<-60)
              a = -60;

          console.log(a)

          sp.rotation(0,a,0).updateT()

      }, false);*/
  }).bind(window)
</script>
</body>
</html>