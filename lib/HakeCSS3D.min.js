!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("HakeCSS3D",[],e):"object"==typeof exports?exports.HakeCSS3D=e():t.HakeCSS3D=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),a=n(o),s=i(6),u=n(s),l=i(7),h=n(l),f=i(5),c=n(f),d=i(8),p=n(d),_=i(2),y=n(_),v=i(9),b=n(v),m=i(3),g=n(m),w=i(10),x=n(w),O=i(11),k=n(O),j=i(12),T=n(j),P=function C(){r(this,C),this.__version="0.1.0",this.color=h["default"],this.Object=g["default"],this.Sprite=y["default"],this.Camera=u["default"],this.Box=a["default"],this.Plane=c["default"],this.Skybox=p["default"],this.Stage=b["default"],this.Orienter=x["default"],this.Triangle=k["default"],this.Tetrahedron=T["default"]};e["default"]=P,t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=function y(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:y(r,e,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},l=i(2),h=n(l),f=i(5),c=n(f),d=i(4),p=n(d),_=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.front=new c["default"],i.front.name="front",i.addChild(i.front),i.back=new c["default"],i.back.name="back",i.addChild(i.back),i.left=new c["default"],i.left.name="left",i.addChild(i.left),i.right=new c["default"],i.right.name="right",i.addChild(i.right),i.up=new c["default"],i.up.name="up",i.addChild(i.up),i.down=new c["default"],i.down.name="down",i.addChild(i.down),i}return a(e,t),s(e,[{key:"update",value:function(){return u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).apply(this),this.updateF(),this}},{key:"updateS",value:function(){var t=p["default"].fixed0(this.width),e=p["default"].fixed0(this.height),i=p["default"].fixed0(this.depth);return this.__orgF.x=this.width/2,this.__orgF.y=this.height/2,this.__orgF.z=this.depth/2,this.front.size(t,e,0).position(0,0,i/2).rotation(0,0,0).updateS().updateT(),this.back.size(t,e,0).position(0,0,-i/2).rotation(0,180,0).updateS().updateT(),this.left.size(i,e,0).position(-t/2,0,0).rotation(0,-90,0).updateS().updateT(),this.right.size(i,e,0).position(t/2,0,0).rotation(0,90,0).updateS().updateT(),this.up.size(t,i,0).position(0,-e/2,0).rotation(90,0,0).updateS().updateT(),this.down.size(t,i,0).position(0,e/2,0).rotation(-90,0,0).updateS().updateT(),this}},{key:"updateM",value:function(){if(!this.__mat)return this;var t=!0;for(var e in this.__mat)switch(e){case"front":case"back":case"left":case"right":case"up":case"down":void 0===this.__mat[e].bothsides&&(this.__mat[e].bothsides=!1),this[e].material(this.__mat[e]).updateM(),t=!1}return t&&(void 0===this.__mat.bothsides&&(this.__mat.bothsides=!1),this.front.material(this.__mat).updateM(),this.back.material(this.__mat).updateM(),this.left.material(this.__mat).updateM(),this.right.material(this.__mat).updateM(),this.up.material(this.__mat).updateM(),this.down.material(this.__mat).updateM()),this}},{key:"updateF",value:function(){return this.__flt?(this.front.filter(this.__flt).updateF(),this.back.filter(this.__flt).updateF(),this.left.filter(this.__flt).updateF(),this.right.filter(this.__flt).updateF(),this.up.filter(this.__flt).updateF(),this.down.filter(this.__flt).updateF(),this):this}},{key:"filter",value:function(t){return this.__flt=t,this}}]),e}(h["default"]);e["default"]=_,t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(u){r=!0,o=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=function y(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:y(r,e,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},f=i(3),c=n(f),d=i(4),p=n(d),_=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));i.__name="",i.__id="",i.__class="",i.alpha=1,i.visible=!0;var n=void 0;if(t&&t.el)switch(u(t.el)){case"string":n=document.createElement("div"),n.innerHTML=t.el;break;case"object":1===t.el.nodeType&&(n=t.el)}return n||(n=document.createElement("div")),n.style.position="absolute",n.style[i.prefix+"Transform"]="translateZ(0px)",n.style[i.prefix+"TransformStyle"]="preserve-3d",i.el=n,n.le=i,i}return a(e,t),l(e,[{key:"name",value:function(t){return this.__name=t,""===t?delete this.el.dataset.name:this.el.dataset.name=t,this}},{key:"id",value:function(t){return this.__id=t,this.el.id=t,this}},{key:"class",value:function(t){return this.__class=t,this.el.className=t,this}},{key:"update",value:function(){return this.updateS(),this.updateM(),this.updateO(),this.updateT(),this.updateV(),this}},{key:"updateS",value:function(){return this}},{key:"updateM",value:function(){if(!this.__mat)return this;for(var t in this.__mat)switch(t){case"bothsides":this.el.style[this.prefix+"BackfaceVisibility"]=this.__mat[t]?"visible":"hidden";break;case"image":this.el.style["background"+p["default"].firstUpper(t)]=""!==this.__mat[t]?"url("+this.__mat[t]+")":"";break;default:this.el.style["background"+p["default"].firstUpper(t)]=this.__mat[t]}return this}},{key:"updateO",value:function(){if("number"==typeof this.originX){var t=p["default"].fixed0(this.originX-this.__orgF.x);this.__orgO.x=t+"px",this.__orgT.x=-t+"px"}else this.__orgO.x=this.originX,this.__orgT.x="-"+this.originX;if("number"==typeof this.originY){var e=p["default"].fixed0(this.originY-this.__orgF.y);this.__orgO.y=e+"px",this.__orgT.y=-e+"px"}else this.__orgO.y=this.originY,this.__orgT.y="-"+this.originY;if("number"==typeof this.originZ){var i=p["default"].fixed0(this.originZ-this.__orgF.z);this.__orgO.z=i+"px",this.__orgT.z=-i+"px"}else this.__orgO.z=this.__orgT.z="0px";return this.el.style[this.prefix+"TransformOrigin"]=this.__orgO.x+" "+this.__orgO.y+" "+this.__orgO.z,this}},{key:"updateT",value:function(){var t=s(this.__sort,3),e=t[0],i=t[1],n=t[2];return this.el.style[this.prefix+"Transform"]="translate3d("+this.__orgT.x+", "+this.__orgT.y+", "+this.__orgT.z+") translate3d("+p["default"].fixed2(this.x)+"px,"+p["default"].fixed2(this.y)+"px,"+p["default"].fixed2(this.z)+"px) rotate"+e+"("+p["default"].fixed2(this["rotation"+e])%360+"deg) rotate"+i+"("+p["default"].fixed2(this["rotation"+i])%360+"deg) rotate"+n+"("+p["default"].fixed2(this["rotation"+n])%360+"deg) scale3d("+p["default"].fixed2(this.scaleX)+", "+p["default"].fixed2(this.scaleY)+", "+p["default"].fixed2(this.scaleZ)+") ",this}},{key:"updateV",value:function(){return this.el.style.opacity=this.alpha,this.el.style.display=this.visible?"block":"none",this}},{key:"addChild",value:function(t){return h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addChild",this).apply(this,[t]),this.el&&t.el&&this.el.appendChild(t.el),this}},{key:"removeChild",value:function(t){for(var e=this.children.length-1;e>=0;e--)if(this.children[e]===t)return""!==t.__name&&delete this[t.__name],this.children.splice(e,1),t.parent=null,this.el.removeChild(t.el),this;return this}},{key:"removeAllChild",value:function(){for(var t=this.children.length-1;t>=0;t--){var e=this.children[t];""!==e.__name&&delete this[e.__name],e.parent=null,this.el.removeChild(e.el)}return this.children=[],this}},{key:"on",value:function(t){if("object"===("undefined"==typeof t?"undefined":u(t)))for(var e in t)this.el.addEventListener(e,t[e],!1);else 2===arguments.length?this.el.addEventListener(arguments[0],arguments[1],!1):3===arguments.length&&this.el.addEventListener(arguments[0],arguments[1],arguments[2]);return this}},{key:"off",value:function(t){if("object"===("undefined"==typeof t?"undefined":u(t)))for(var e in t)this.el.removeEventListener(e,t[e],!1);else 2===arguments.length&&this.el.removeEventListener(arguments[0],arguments[1],!1);return this}},{key:"buttonMode",value:function(t){return t?this.el.style.cursor="pointer":this.el.style.cursor="auto",this}},{key:"material",value:function(t){return this.__mat=t,this}},{key:"visibility",value:function(t){return void 0!==t.visible&&(this.visible=t.visible),void 0!==t.alpha&&(this.alpha=t.alpha),this}}]),e}(c["default"]);e["default"]=_,t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(4),s=n(a),u=function(){function t(e){r(this,t),this.x=0,this.y=0,this.z=0,this.rotationX=0,this.rotationY=0,this.rotationZ=0,this.scaleX=1,this.scaleY=1,this.scaleZ=1,this.width=0,this.height=0,this.depth=0,this.__sort=["X","Y","Z"],this.originX="50%",this.originY="50%",this.originZ="0px",this.__orgO={x:"50%",y:"50%",z:"0px"},this.__orgT={x:"-50%",y:"-50%",z:"0px"},this.__orgF={x:0,y:0,z:0},this.children=[],this.prefix=s["default"].prefixCheck()}return o(t,[{key:"position",value:function(t,e,i){return this.x=t?t:this.x,this.y=e?e:this.y,this.z=i?i:this.z,this}},{key:"move",value:function(t,e,i){return this.x+=t?t:0,this.y+=e?e:0,this.z+=i?i:0,this}},{key:"rotation",value:function(t,e,i){return this.rotationX=t?t:this.rotationX,this.rotationY=e?e:this.rotationY,this.rotationZ=i?i:this.rotationZ,this}},{key:"rotate",value:function(t,e,i){return this.rotationX+=t?t:0,this.rotationY+=e?e:0,this.rotationZ+=i?i:0,this}},{key:"scale",value:function(t,e,i){return this.scaleX=t?t:this.scaleX,this.scaleY=e?e:this.scaleY,this.scaleZ=i?i:this.scaleZ,this}},{key:"size",value:function(t,e,i){switch(arguments.length){case 1:this.width=t,this.height=t,this.depth=t;break;case 2:this.width=t,this.height=e;break;case 3:this.width=t,this.height=e,this.depth=i}return this}},{key:"origin",value:function(t,e,i){switch(arguments.length){case 1:this.originX=t,this.originY=t,this.originZ=t;break;case 2:this.originX=t,this.originY=e;break;case 3:this.originX=t,this.originY=e,this.originZ=i}return this}},{key:"sort",value:function(t,e,i){return arguments.length>3&&console.error("sort arguments is wrong!"),this.__sort=[t,e,i],this}},{key:"addChild",value:function(t){return t.parent&&t.parent.removeChild(t),""!==t.__name&&(void 0!==this[t.__name]&&console.log(t.__name+" already exist!"),this[t.__name]=t),this.children.push(t),t.parent=this,this}},{key:"removeChild",value:function(t){for(var e=this.children.length-1;e>=0;e--)if(this.children[e]===t)return""!==t.__name&&delete this[t.__name],this.children.splice(e,1),t.parent=null,this;return this}},{key:"removeAllChild",value:function(){for(var t=this.children.length-1;t>=0;t--){var e=this.children[t];""!==e.__name&&delete this[e.__name],e.parent=null}return this.children=[],this}},{key:"remove",value:function(){return null!==this.parent&&this.parent.removeChild(this),this}}]),t}();e["default"]=u,t.exports=e["default"]},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){i(this,t)}return n(t,null,[{key:"fixed0",value:function(t){return Math.round(t)}},{key:"fixed2",value:function(t){return Math.round(100*t)/100}},{key:"firstUpper",value:function(t){return t[0].toUpperCase()+t.slice(1,t.length)}},{key:"prefixCheck",value:function(){var t=document.createElement("DIV"),e=["","Webkit","Moz","Ms","O"];for(var i in e)if(e[i]+"Transform"in t.style)return e[i];console.error("Your browser might not support CSS3 properly.")}}]),t}();e["default"]=r,t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=function p(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:p(r,e,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},l=i(2),h=n(l),f=i(4),c=n(f),d=function(t){function e(t){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return a(e,t),s(e,[{key:"update",value:function(){return u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).apply(this),this.updateF(),this}},{key:"updateS",value:function(){return this.el.style.width=c["default"].fixed0(this.width)+"px",this.el.style.height=c["default"].fixed0(this.height)+"px",this}},{key:"updateF",value:function(){if(!this.__flt)return this;var t="";for(var e in this.__flt)t+=""!==this.__flt[e]?e+"("+this.__flt[e].join(",")+")":"";return""!==t&&(this.el.style[this.prefix+"Filter"]=t),this}},{key:"filter",value:function(t){return this.__flt=t,this}}]),e}(h["default"]);e["default"]=d,t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(3),l=n(u),h=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.fov=75,i}return a(e,t),s(e,[{key:"update",value:function(){return this.updateT(),this}},{key:"updateS",value:function(){return this}},{key:"updateM",value:function(){return this}},{key:"updateT",value:function(){return this.stage&&this.stage.updateT(),this}},{key:"updateV",value:function(){return this}}]),e}(l["default"]);e["default"]=h,t.exports=e["default"]},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){i(this,t)}return n(t,null,[{key:"getRandomColor",value:function(){return"#"+("000000"+(16777216*Math.random()<<0).toString(16)).slice(-6)}},{key:"RGBToHex",value:function(t,e,i){return(t<<16|e<<8|i).toString(16)}},{key:"hexToRGB",value:function(t){var e=Math.floor("0x"+t);return[e>>16&255,e>>8&255,255&e]}}]),t}();e["default"]=r,t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(1),l=n(u),h=i(4),f=n(h),c=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"updateS",value:function(){var t=f["default"].fixed0(this.width),e=f["default"].fixed0(this.height),i=f["default"].fixed0(this.depth);return this.__orgF.x=this.width/2,this.__orgF.y=this.height/2,this.__orgF.z=this.depth/2,this.front.size(t,e,0).position(0,0,-i/2).rotation(0,0,0).updateS().updateT(),this.back.size(t,e,0).position(0,0,i/2).rotation(0,180,0).updateS().updateT(),this.left.size(i,e,0).position(-t/2,0,0).rotation(0,90,0).updateS().updateT(),this.right.size(i,e,0).position(t/2,0,0).rotation(0,-90,0).updateS().updateT(),this.up.size(t,i,0).position(0,-e/2,0).rotation(-90,0,0).updateS().updateT(),this.down.size(t,i,0).position(0,e/2,0).rotation(90,0,0).updateS().updateT(),this}}]),e}(l["default"]);e["default"]=c,t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(2),l=n(u),h=i(6),f=n(h),c=i(4),d=n(c),p=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return t&&t.el||(i.el.style.top="0px",i.el.style.left="0px",i.el.style.width="0px",i.el.style.height="0px"),i.el.style[i.prefix+"Perspective"]="800px",i.el.style[i.prefix+"TransformStyle"]="flat",i.el.style[i.prefix+"Transform"]="",i.el.style.overflow="hidden",i.__rfix=new l["default"],i.el.appendChild(i.__rfix.el),i.__pfix=new l["default"],i.__rfix.el.appendChild(i.__pfix.el),i.setCamera(new f["default"]),i}return a(e,t),s(e,[{key:"updateS",value:function(){return this.el.style.width=d["default"].fixed0(this.width)+"px",this.el.style.height=d["default"].fixed0(this.height)+"px",this}},{key:"updateT",value:function(){return this.fov=d["default"].fixed0(.5/Math.tan(.5*this.camera.fov/180*Math.PI)*this.height),this.el.style[this.prefix+"Perspective"]=this.fov+"px",this.__rfix.position(d["default"].fixed0(this.width/2),d["default"].fixed0(this.height/2),this.fov).rotation(-this.camera.rotationX,-this.camera.rotationY,-this.camera.rotationZ).updateT(),this.__pfix.position(-this.camera.x,-this.camera.y,-this.camera.z).updateT(),this}},{key:"addChild",value:function(t){return this.__pfix.addChild(t),this}},{key:"removeChild",value:function(t){return this.__pfix.removeChild(t),this}},{key:"setCamera",value:function(t){return this.camera&&(this.camera.stage=null),this.camera=t,this.camera.stage=this,this}}]),e}(l["default"]);e["default"]=p,t.exports=e["default"]},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e){i(this,t);var n=e||{};switch(this.onOrient=n.onOrient||function(){},this.onChange=n.onChange||function(){},this._orient=this._orient.bind(this),this._change=this._change.bind(this),this.lon=0,this.lat=0,this.direction=window.orientation||0,this.direction){case 0:this.fix=0;break;case 90:this.fix=-270;break;case-90:this.fix=-90}navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?this.os="ios":this.os=navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Linux")?"android":""}return n(t,[{key:"init",value:function(){window.addEventListener("deviceorientation",this._orient,!1),window.addEventListener("orientationchange",this._change,!1)}},{key:"destroy",value:function(){window.removeEventListener("deviceorientation",this._orient,!1),window.removeEventListener("orientationchange",this._change,!1)}},{key:"_change",value:function(t){this.direction=window.orientation,this.onChange(this.direction)}},{key:"changeDirectionTo",value:function(t){this.direction=t}},{key:"_orient",value:function(t){switch(this.os){case"ios":switch(this.direction){case 0:this.lon=t.alpha+t.gamma,t.beta>0&&(this.lat=t.beta-90);break;case 90:t.gamma<0?this.lon=t.alpha-90:this.lon=t.alpha-270,t.gamma>0?this.lat=90-t.gamma:this.lat=-90-t.gamma;break;case-90:t.gamma<0?this.lon=t.alpha-90:this.lon=t.alpha-270,t.gamma<0?this.lat=90+t.gamma:this.lat=-90+t.gamma}break;case"android":switch(this.direction){case 0:this.lon=t.alpha+t.gamma+30,t.gamma>90?this.lat=90-t.beta:this.lat=t.beta-90;break;case 90:this.lon=t.alpha-230,t.gamma>0?this.lat=270-t.gamma:this.lat=-90-t.gamma;break;case-90:this.lon=t.alpha-180,this.lat=-90+t.gamma}}this.lon+=this.fix,this.lon%=360,this.lon<0&&(this.lon+=360),this.lon=Math.round(this.lon),this.lat=Math.round(this.lat),this.onOrient({a:Math.round(t.alpha),b:Math.round(t.beta),g:Math.round(t.gamma),lon:this.lon,lat:this.lat,dir:this.direction})}}]),t}();e["default"]=r,t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=function p(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:p(r,e,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},l=i(2),h=n(l),f=i(4),c=n(f),d=function(t){function e(t){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return a(e,t),s(e,[{key:"update",value:function(){return u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).apply(this),this.updateF(),this}},{key:"updateS",value:function(){return this.el.style.borderLeft=c["default"].fixed0(this.width)+"px transparent solid",this.el.style.borderRight=c["default"].fixed0(this.width)+"px transparent solid",this.el.style.borderBottom=c["default"].fixed0(this.height)+"px solid",this}},{key:"updateM",value:function(){if(!this.__mat)return this;for(var t in this.__mat)switch(t){case"bothsides":this.el.style[this.prefix+"BackfaceVisibility"]=this.__mat[t]?"visible":"hidden";break;case"image":this.el.style[this.prefix+"BorderImage"]=""!==this.__mat[t]?"url("+this.__mat[t]+")":"";break;default:this.el.style.borderBottom+=" "+this.__mat[t]}return this}},{key:"updateF",value:function(){if(!this.__flt)return this;var t="";for(var e in this.__flt)t+=""!==this.__flt[e]?e+"("+this.__flt[e].join(",")+")":"";return""!==t&&(this.el.style[this.prefix+"Filter"]=t),this}},{key:"filter",value:function(t){return this.__flt=t,this}}]),e}(h["default"]);e["default"]=d,t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=function y(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:y(r,e,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},l=i(2),h=n(l),f=i(11),c=n(f),d=i(4),p=n(d),_=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return console.warn("this component haven't finished yet, please don't use"),i.sideA=new c["default"],i.sideA.name="sideA",i.addChild(i.sideA),i.sideB=new c["default"],i.sideB.name="sideB",i.addChild(i.sideB),i.sideC=new c["default"],i.sideC.name="sideC",i.addChild(i.sideC),i.bottom=new c["default"],i.bottom.name="sideA",i.addChild(i.bottom),i}return a(e,t),s(e,[{key:"update",value:function(){return u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).apply(this),this.updateF(),this}},{key:"updateS",value:function(){var t=p["default"].fixed0(.866*this.width/2),e=p["default"].fixed0(this.width);return this.__orgF.x=this.width/2,this.__orgF.y=.57735*t,this.__orgF.z=.2041*t,this.sideA.size(t,e,0).position(0,0,0).rotation(0,70.5,30).updateS().updateT(),this.sideB.size(t,e,0).position(0,0,0).rotation(0,70.5,150).updateS().updateT(),this.sideC.size(t,e,0).position(0,0,0).rotation(0,70.5,270).updateS().updateT(),this.bottom.size(t,e,0).position(this.__orgF.x,0,0).rotation(90,0,90).updateS().updateT(),this}},{key:"updateM",value:function(){if(!this.__mat)return this;var t=!0;for(var e in this.__mat)switch(e){case"sideA":case"sideB":case"sideC":case"bottom":void 0===this.__mat[e].bothsides&&(this.__mat[e].bothsides=!1),this[e].material(this.__mat[e]).updateM(),t=!1}return t&&(void 0===this.__mat.bothsides&&(this.__mat.bothsides=!1),this.sideA.material(this.__mat).updateM(),this.sideB.material(this.__mat).updateM(),this.sideC.material(this.__mat).updateM(),this.bottom.material(this.__mat).updateM()),this}},{key:"updateF",value:function(){return this.__flt?(this.front.filter(this.__flt).updateF(),this.back.filter(this.__flt).updateF(),this.left.filter(this.__flt).updateF(),this.right.filter(this.__flt).updateF(),this.up.filter(this.__flt).updateF(),this.down.filter(this.__flt).updateF(),this):this}},{key:"filter",value:function(t){return this.__flt=t,this}}]),e}(h["default"]);e["default"]=_,t.exports=e["default"]}])});
//# sourceMappingURL=HakeCSS3D.min.js.map